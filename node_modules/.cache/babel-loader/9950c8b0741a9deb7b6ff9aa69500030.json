{"ast":null,"code":"var _jsxFileName = \"/home/zagi25/Ucenje/git/Weather-forecast-website/weather/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport moment from \"moment\";\nimport Current from \"./Current\";\nimport Loading from \"./Loading\";\nimport Chart from \"./Chart\"; // import Daily from \"./Daily\";\n\nimport { FaSearch } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [location, setLocation] = useState({\n    lat: null,\n    lon: null\n  });\n  const [input, setInput] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [data, setData] = useState({\n    date_time: null,\n    temp: null,\n    humidity: null,\n    wind_speed: null,\n    id: null,\n    state: \"\",\n    daily: []\n  });\n  const [cityName, setCityName] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [size, setSize] = useState(window.innerWidth);\n  const [chartData, setChartData] = useState({});\n  const isMounted = useRef(0);\n  const url1 = `http://api.openweathermap.org/data/2.5/onecall?lat=${location.lat}&lon=${location.lon}&units=metric&appid=0a0015fb406229dfc0d39446cf26e8e4`;\n  const url2 = `http://api.openweathermap.org/geo/1.0/direct?q=${city}&appid=0a0015fb406229dfc0d39446cf26e8e4`;\n  const url3 = `http://api.openweathermap.org/geo/1.0/reverse?lat=${location.lat}&lon=${location.lon}&appid=0a0015fb406229dfc0d39446cf26e8e4`;\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setCity(input);\n    setInput(\"\");\n    isMounted.current = 3;\n  };\n\n  const checkSize = () => {\n    setSize(window.innerWidth);\n  };\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      setLocation({\n        lat: position.coords.latitude,\n        lon: position.coords.longitude\n      });\n      isMounted.current = 1;\n    }, function (error) {\n      setCity(\"London\");\n      setLocation({\n        lat: 51.5085,\n        lon: -0.1257\n      });\n      isMounted.current = 3;\n    }, {\n      enableHighAccuracy: true,\n      maximumAge: 30000,\n      timeout: 27000\n    });\n  }, []);\n  useEffect(() => {\n    const chart = data.daily.map(day => day.temp.day);\n    console.log(chart); // console.log(data.daily.map((day) => day.temp.day));\n\n    console.log(chartData);\n  }, [data, chartData]);\n  useEffect(() => {\n    const fetchLoLa = async () => {\n      try {\n        const response1 = await fetch(url2);\n        const cityd = await response1.json();\n        setLocation({\n          lat: cityd[0].lat,\n          lon: cityd[0].lon\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    if (isMounted.current === 3) {\n      fetchLoLa();\n    }\n  }, [city, url2]);\n  useEffect(() => {\n    const fetchWeather = async () => {\n      setIsLoading(true);\n\n      try {\n        const response = await fetch(url1);\n        const weather = await response.json();\n        setData({\n          date_time: weather.current.dt,\n          temp: weather.current.temp,\n          humidity: weather.current.humidity,\n          wind_speed: weather.current.wind_speed,\n          id: weather.current.weather[0].id,\n          state: weather.current.weather[0].description,\n          daily: weather.daily\n        });\n      } catch (error) {\n        console.log(error);\n      }\n\n      setChartData({\n        labels: [1, 2, 3, 4, 5, 6, 7, 8],\n        datasets: [{\n          label: \"Temperature\",\n          data: data.daily.map(day => day.temp.day)\n        }]\n      });\n      setIsLoading(false);\n    };\n\n    const fetchCityN = async () => {\n      try {\n        const response = await fetch(url3);\n        const name = await response.json();\n        setCityName(name[0].name);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    if (isMounted.current === 1) {\n      fetchCityN();\n      isMounted.current = 2;\n    }\n\n    if (isMounted.current === 2 || isMounted.current === 3) {\n      fetchWeather();\n      fetchCityN();\n      setTime(moment().format(\"HH:mm, dd, MMM Do, YYYY\"));\n      setChartData({\n        labels: [1, 2, 3, 4, 5, 6, 7, 8],\n        datasets: [{\n          label: \"Temperature\",\n          data: chart\n        }]\n      });\n    }\n  }, [location, url1, url3]);\n  useEffect(() => {\n    window.addEventListener(\"resize\", checkSize);\n    return () => {\n      window.removeEventListener(\"resize\", checkSize);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          placeholder: \"Enter city\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FaSearch, {\n          onClick: handleSubmit,\n          className: \"search-btn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"current\",\n        children: /*#__PURE__*/_jsxDEV(Current, {\n          time: time,\n          cityName: cityName,\n          data: data,\n          loading: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"underline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart\",\n        children: /*#__PURE__*/_jsxDEV(Chart, {\n          data: chartData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(App, \"FZIzIj50mNmvjeefWpaPxxr7D0I=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/zagi25/Ucenje/git/Weather-forecast-website/weather/src/App.js"],"names":["useState","useEffect","useRef","moment","Current","Loading","Chart","FaSearch","App","location","setLocation","lat","lon","input","setInput","time","setTime","city","setCity","data","setData","date_time","temp","humidity","wind_speed","id","state","daily","cityName","setCityName","isLoading","setIsLoading","size","setSize","window","innerWidth","chartData","setChartData","isMounted","url1","url2","url3","handleSubmit","e","preventDefault","current","checkSize","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","enableHighAccuracy","maximumAge","timeout","chart","map","day","console","log","fetchLoLa","response1","fetch","cityd","json","fetchWeather","response","weather","dt","description","labels","datasets","label","fetchCityN","name","format","addEventListener","removeEventListener","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport moment from \"moment\";\nimport Current from \"./Current\";\nimport Loading from \"./Loading\";\nimport Chart from \"./Chart\";\n// import Daily from \"./Daily\";\nimport { FaSearch } from \"react-icons/fa\";\n\nfunction App() {\n  const [location, setLocation] = useState({ lat: null, lon: null });\n  const [input, setInput] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [data, setData] = useState({\n    date_time: null,\n    temp: null,\n    humidity: null,\n    wind_speed: null,\n    id: null,\n    state: \"\",\n    daily: [],\n  });\n  const [cityName, setCityName] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [size, setSize] = useState(window.innerWidth);\n  const [chartData, setChartData] = useState({});\n  const isMounted = useRef(0);\n  const url1 = `http://api.openweathermap.org/data/2.5/onecall?lat=${location.lat}&lon=${location.lon}&units=metric&appid=0a0015fb406229dfc0d39446cf26e8e4`;\n  const url2 = `http://api.openweathermap.org/geo/1.0/direct?q=${city}&appid=0a0015fb406229dfc0d39446cf26e8e4`;\n  const url3 = `http://api.openweathermap.org/geo/1.0/reverse?lat=${location.lat}&lon=${location.lon}&appid=0a0015fb406229dfc0d39446cf26e8e4`;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setCity(input);\n    setInput(\"\");\n    isMounted.current = 3;\n  };\n\n  const checkSize = () => {\n    setSize(window.innerWidth);\n  };\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      function (position) {\n        setLocation({\n          lat: position.coords.latitude,\n          lon: position.coords.longitude,\n        });\n        isMounted.current = 1;\n      },\n      function (error) {\n        setCity(\"London\");\n        setLocation({ lat: 51.5085, lon: -0.1257 });\n        isMounted.current = 3;\n      },\n      {\n        enableHighAccuracy: true,\n        maximumAge: 30000,\n        timeout: 27000,\n      }\n    );\n  }, []);\n\n  useEffect(() => {\n    const chart = data.daily.map((day) => day.temp.day);\n    console.log(chart);\n\n    // console.log(data.daily.map((day) => day.temp.day));\n    console.log(chartData);\n  }, [data, chartData]);\n\n  useEffect(() => {\n    const fetchLoLa = async () => {\n      try {\n        const response1 = await fetch(url2);\n        const cityd = await response1.json();\n        setLocation({ lat: cityd[0].lat, lon: cityd[0].lon });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    if (isMounted.current === 3) {\n      fetchLoLa();\n    }\n  }, [city, url2]);\n\n  useEffect(() => {\n    const fetchWeather = async () => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(url1);\n        const weather = await response.json();\n        setData({\n          date_time: weather.current.dt,\n          temp: weather.current.temp,\n          humidity: weather.current.humidity,\n          wind_speed: weather.current.wind_speed,\n          id: weather.current.weather[0].id,\n          state: weather.current.weather[0].description,\n          daily: weather.daily,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n      setChartData({\n        labels: [1, 2, 3, 4, 5, 6, 7, 8],\n        datasets: [\n          {\n            label: \"Temperature\",\n            data: data.daily.map((day) => day.temp.day),\n          },\n        ],\n      });\n      setIsLoading(false);\n    };\n    const fetchCityN = async () => {\n      try {\n        const response = await fetch(url3);\n        const name = await response.json();\n        setCityName(name[0].name);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    if (isMounted.current === 1) {\n      fetchCityN();\n      isMounted.current = 2;\n    }\n    if (isMounted.current === 2 || isMounted.current === 3) {\n      fetchWeather();\n      fetchCityN();\n      setTime(moment().format(\"HH:mm, dd, MMM Do, YYYY\"));\n      setChartData({\n        labels: [1, 2, 3, 4, 5, 6, 7, 8],\n        datasets: [\n          {\n            label: \"Temperature\",\n            data: chart,\n          },\n        ],\n      });\n    }\n  }, [location, url1, url3]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", checkSize);\n    return () => {\n      window.removeEventListener(\"resize\", checkSize);\n    };\n  });\n\n  return (\n    <>\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <main>\n          <form onSubmit={handleSubmit} className=\"form-control\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Enter city\"\n            />\n            <FaSearch onClick={handleSubmit} className=\"search-btn\" />\n          </form>\n          <div className=\"current\">\n            <Current\n              time={time}\n              cityName={cityName}\n              data={data}\n              loading={isLoading}\n            />\n          </div>\n          <div className=\"underline\"></div>\n\n          <div className=\"chart\">\n            <Chart data={chartData} />\n          </div>\n\n          {/* {data.daily.map((day, index) => {\n            return (\n              <div key={index} className={`daily daily${index}`}>\n                <Daily day={day} size={size} />\n              </div>\n            );\n          })} */}\n        </main>\n      )}\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}